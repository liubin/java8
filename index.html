<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Java SE 8 Introduction</title>
    <link rel="stylesheet" href="styles/styles.css"/>
  </head>
  <body>
    <article>
      <section>
        <h1>Java SE 8 Introduction</h1>
        <p>bin liu</p>
        <p>Credit: <a href="http://overwater.poco.cn">http://overwater.poco.cn</a></p>
      </section>
      <section>
        <h2>Target</h2>
        <ul>
          <li></li>
          <li>Funcational</li>
          <li>None for(int i=0; i++; i< array.size())</li>
          <li>Lambda</li>
          <li>Stream</li>
        </ul>
      </section>
      <section>
        <h2>Java versions</h2>
        <ul>
          <li></li>
          <li><a href="http://www.oracle.com/technetwork/java/javase/8train-relnotes-latest-2153846.html">JDK 8 Release Notes</a></li>
          <li><a href="http://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html">What's New in JDK 8</a></li>
        </ul>
      </section>
      <section>
        <h2>New features</h2>
        <ul>
          <li></li>
          <li>Lambda Expressions</li>
          <li>Method references</li>
          <li>Default methods</li>
          <li>Repeating Annotations</li>
          <li>Stream</li>
          <li>Nashorn Javascript Engine</li>
          <li>Parallel Array Sorting</li>
          <li>Standard Encoding and Decoding Base64</li>
          <li>Concurrency</li>
        </ul>
      </section>
      <section>
        <h2>Why lambda</h2>
        <ul>
          <li></li>
          <li>Parallelism</li>
          <li>Asynchronous</li>
          <li>Cool</li>
        </ul>
      </section>
      <section>
        <h2>Lambda</h2>
        <hr>
        <pre><code class="language-java">ActionListener al = new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        showMessageDialog(f, "你好);
    }
};

</code></pre>
      </section>
      <section>
        <h2>Lambda</h2>
        <hr>
        <pre><code class="language-java">ActionListener al =
            e -> showMessageDialog(frame, "你好");
            
            
            </code></pre>
      </section>
      <section>
        <h2>Funcational Interface</h2>
        <ul>
          <li></li>
          <li>Interfaces contains only one abstract method</li>
          <li>@FuncationalInterface</li>
          <li>Lambda is not a "Value" but a "Funcational Interface"</li>
        </ul>
      </section>
      <section>
        <h2>Funcational Interface</h2>
        <pre><code class="language-java">public void printPersons(List<Person> roster,
    CheckPerson tester) {
          ...
}

// interface
interface CheckPerson {
    boolean test(Person p);
}
</code></pre>
      </section>
      <section>
        <h2>Funcational Interface</h2>
        <pre><code class="language-java">// anonymous class
printPersons(
    roster,
    new CheckPerson() {
        public boolean test(Person p) {
            return p.getGender() == Person.Sex.MALE
                && p.getAge() >= 18
                && p.getAge() <= 25;
        }
    }
);
</code></pre>
      </section>
      <section>
        <h2>Funcational Interface</h2>
        <pre><code class="language-java">printPersons(
    roster,
    (Person p) -> p.getGender() == Person.Sex.MALE
        && p.getAge() >= 18
        && p.getAge() <= 25
);</code></pre><strong><a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">lambda expressions tutorial</a></strong>
      </section>
      <section>
        <h2>Lambda</h2>
        <pre><code class="language-java">public static void processPersons(
    List<Person> roster,
    Predicate<Person> tester,
    Consumer<Person> block) {
        for (Person p : roster) {
            if (tester.test(p)) {
                block.accept(p);
            }
        }
}
</code></pre>
      </section>
      <section>
        <h2>Lambda</h2>
        <pre><code class="language-java">processPersonsWithFunction(
    roster,
    p -> p.getGender() == Person.Sex.MALE
        && p.getAge() >= 18
        && p.getAge() <= 25,
    p -> p.getEmailAddress(),
    email -> System.out.println(email)
);

</code></pre>
      </section>
      <section>
        <h2>Lambda syntax</h2>
        <pre><code class="language-java">() -> System.out.println("hehe")

x -> System.out.println("hehe " + x)

(a, b) -> a + b

(int x, int y) -> {
    return x + y;
}

</code></pre>
      </section>
      <section>
        <h2>Lambda Variables Scope</h2>
        <ul>
          <li></li>
          <li>have the same access to local variables of the enclosing scope</li>
          <li>do not have any shadowing issues/ no new level of scoping</li>
        </ul>
      </section>
      <section>
        <h2>Lambda: return action</h2>
        <p>return in lambda expression</p>
        <pre class="bullet"><code class="language-java">List<String> strs = Arrays.asList("a", "b", "c", "d");
strs.forEach(s -> {
  if(s.equals("c")) return;
    System.out.println(s);
});
// output
// a
// b
// d
</code></pre>
      </section>
      <section>
        <h2>Lambda: this</h2>
        <pre class="bullet"><code class="language-java">public class Sample {
    public void hoge(){
        new Runnable(){
            @Override
            public void run() {
                System.out.println(this.getClass());
            }
        }.run();
        ((Runnable)() ->  System.out.println(this.getClass())).run();
    }
}</code></pre>
        <ul>
          <li>Sample$1</li>
          <li>Sample</li>
        </ul>
      </section>
      <section>
        <h2>Lambda: final variables</h2>
        <ul>
          <li></li>
          <li>no final keyword needed</li>
          <li>assignment when declared</li>
          <li>can't reassign</li>
        </ul>
      </section>
      <section>
        <h2>Lambda</h2>
        <ul>
          <li></li>
          <li>not directly support by JVM, processed as Class's instances</li>
        </ul>
      </section>
      <section>
        <h2>Method reference</h2>
        <ul>
          <li></li>
          <li>instance::method (with only one parameter)</li>
          <li>Class::method
            <ul>
              <li></li>
              <li>static method with only one parameter</li>
              <li>instance mehtod without parameter</li>
            </ul>
          </li>
        </ul>
      </section>
      <section>
        <h2>Default Method</h2>
        <p>also</p>
        <ul>
          <li></li>
          <li>virtual extension methods</li>
          <li>Defender method</li>
        </ul>
      </section>
      <section>
        <h2>Generalized Target-Type Inference</h2>
      </section>
      <section>
        <h2>Stream API</h2>
        <ul>
          <li></li>
          <li>java.util.stream</li>
          <li>A stream is a sequence of elements</li>
          <li>Stream pipeline</li>
          <li>A sequence of elements supporting sequential and parallel aggregate operations</li>
          <li>Most stream operations accept parameters that describe user-specified behavior</li>
          <ul>
            <li></li>
            <li>instances of a functional interface such as Function</li>
            <li>lambda expressions</li>
            <li>method references</li>
          </ul>
        </ul>
      </section>
      <section>
        <h2>Ruby/Rails</h2>
        <pre class="bullet"><code class="language-ruby"># Ruby
[1,2,3,4].reduce(:+) # => 10

Product.where("type = 0").limit(100).order("price")
</code></pre>
        <pre class="bullet"><code class="language-java">// Java
Integer sum = integers.reduce(0, Integer::sum);

</code></pre>
      </section>
      <section>
        <h2>Stream API</h2>
        <pre><code class="language-java">List<String> girlStudyBugs = students.stream()
    .filter(f -> f.getGender().equals("F"))
    .filter(f -> f.getScore() > 80)
    .sorted(Comparator.comparingInt(Student::getScore))
    .map(Student::getName)
    .collect(Collectors.toList());
    </code></pre>
      </section>
      <section>
        <h2>Stream Operations</h2>
        <ul>
          <li></li>
          <li>Source(Arrays,Collections, IO channel)</li>
          <li>Intermediate Operations(All intermediate operations are lazy)</li>
          <li>Terminal Operation</li>
        </ul>
      </section>
      <section>
        <h2>Stream Source</h2>
        <ul>
          <li></li>
          <li>Stream&lt;T&gt;</li>
          <li>IntStream, LongStream, DoubleStream</li>
        </ul>
      </section>
      <section>
        <h2>Create Stream</h2>
        <ul>
          <li></li>
          <li>Collection#stream</li>
          <li>Arrays#stream</li>
          <li>Stream#of</li>
          <li>BufferReader#lines</li>
          <li>IntStream#range</li>
        </ul>
      </section>
      <section>
        <h2>Intermediate Operations</h2>
        <ul>
          <li></li>
          <li>filter</li>
          <li>map, flatMap</li>
          <li>sorted</li>
          <li>limit, skip</li>
          <li>distinct</li>
          <li>peek</li>
        </ul>
      </section>
      <section>
        <h2>Terminal Operation</h2>
        <ul>
          <li></li>
          <li>produces a non-stream result(primitive value/ collections/ no value at all)</li>
          <li>collect, reduce</li>
          <li>min, max, average, sum, count</li>
          <li>findFirst, findAny</li>
          <li>allMatch, anyMatch, noneMatch</li>
          <li>forEach, forEachOrdered</li>
        </ul>
      </section>
      <section>
        <h2>Stream.reduce</h2>
        <ul>
          <li></li>
          <li>general-purpose reduction operation</li>
          <li>T reduce(T identity, BinaryOperator<T> accumulator)</li>
          <li>always returns a new value</li>
          <pre><code class="language-java">T result = identity;
for (T element : this stream)
  result = accumulator.apply(result, element)
return result;
</code></pre>
        </ul>
      </section>
      <section>
        <h2>Stream.reduce</h2>
        <ul>
          <li></li>
        </ul>
        <pre><code class="language-java">Integer totalAge = roster
    .stream()
    .mapToInt(Person::getAge)
    .sum();
    
Integer totalAgeReduce = roster
   .stream()
   .map(Person::getAge)
   .reduce(
       0,
       (a, b) -> a + b);
       </code></pre>
      </section>
      <section>
        <h2>Stream.reduce</h2>
        <ul>
          <li></li>
          <li></li>
        </ul>
      </section>
      <section>
        <h2>Sequential/Parallel Stream</h2>
      </section>
      <section>
        <h2>java.util.function</h2>
        <ul>
          <li>Interfaces</li>
          <ul>
            <li></li>
            <li>Function/BiFunction</li>
            <li>Supplier</li>
            <li>Predicate</li>
            <li>Consumer</li>
            <li>Int|Double|Long</li>
          </ul>
        </ul>
      </section>
      <section>
        <h2>java.util.function.BiFunction</h2>
        <pre><code class="language-java">BiFunction<String, String, String> 
  join = (s, String t) -> s + t;
  </code></pre>
      </section>
      <section>
        <h2>java.util.function.Function</h2>
        <ul>
          <li></li>
          <li>R apply(T t)</li>
          <li><V> Function<T,V> compose(Function<? super R,? extends V> after)</li>
        </ul>
        <pre class="bullet"><code class="language-java">public void modifyTheValue(int value,
  Function<Integer, Integer> function){
    int newValue = function.apply(value);
}
Function<Integer, Integer> testFunction = intVal -> {
  return intVal * 10;
};

myNumber = 15;
modifyTheValue(myNumber, val-> val * 10);
int x = testFunction.apply(myNumber);
</code></pre>
      </section>
      <section>
        <h2>java.util.function.Supplier</h2>
        <ul>
          <li></li>
          <li>A supplier of objects</li>
          <li>T get()</li>
        </ul>
      </section>
      <section>
        <h2>java.util.function.Predicate</h2>
        <ul>
          <li></li>
          <li>Determines if the input object matches some criteria</li>
          <li>boolean test(T t)</li>
          <li>Predicate<T> and(Predicate<? super T> p)</li>
          <li>Predicate<T> negate()</li>
          <li>Predicate<T> or(Predicate<? super T> p)</li>
          <li>Predicate<T> xor(Predicate<? super T> p)</li>
        </ul>
      </section>
      <section>
        <h2>java.util.function.Consumer</h2>
        <ul>
          <li></li>
          <li>Accepts a single input argument and returns no result</li>
          <li>void accept(T t)</li>
          <li>Consumer<T> chain(Consumer<? super T> other)</li>
        </ul>
      </section>
      <section>
        <pre><code class="language-java">public void test(Supplier<Student> supplier,
  Predicate<Student> predicate,
  Consumer<Student> consumer) {
    if (predicate.test(s)) {
      consumer.accept(supplier.get());
    }else {
    };
}

Consumer<Student> consumer = student -> {
        System.out.println("Student Consumer: ");
        System.out.println(student);
};

Predicate<Student> predicate = student -> 
          student.getGender() == Person.Sex.MALE;
          
Supplier<Student> supplier = () -> { 
  return new Student("first", "last", Person.Sex.MALE, 25);
};

test(supplier, consumer, predicate);
</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>not in java.util.function</li>
          <li>but in java.util</li>
          <li>no if (x != null)</li>
          <li>no NullPointerException</li>
        </ul>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>Optional.of()</li>
          <li>Optional.empty()</li>
          <li>all static methods</li>
        </ul>
        <pre class="bullet"><code class="language-java">Optional<String> name = Optional.of("zhangsan");
Optional empty = Optional.empty();

System.out.println(empty.get());
// java.util.NoSuchElementException
</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>Optional.isPresent</li>
          <li>Optional.get</li>
        </ul>
        <pre class="bullet"><code class="language-java">try {
  if (name.isPresent()) {
    System.out.println(name.get());
  }
} catch (NoSuchElementException ex) {
  System.out.println(ex.getMessage());
}
</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>Optional.ifPresent(Consumer<? super T> consumer)</li>
        </ul>
        <pre class="bullet"><code class="language-java">name.ifPresent((value) -> {
  System.out.println("Stuent name is : " + value);
});
</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>Optional.orElse</li>
          <li>Optional.orElseGet(Supplier<T> other)</li>
        </ul>
        <pre class="bullet"><code class="language-java">empty.orElse("There is no value present!");
name.orElse("There is some value!");
</code></pre>
        <pre class="bullet"><code class="language-java">empty.orElseGet(() -> "Default Value");
name.orElseGet(() -> "Default Value");

</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>Optional.orElseThrow(Supplier<V> exceptionFactory)</li>
        </ul>
        <pre class="bullet"><code class="language-java">class ValueAbsentException extends Throwable {
  ... ...
}
try {
  empty.orElseThrow(ValueAbsentException::new);
} catch (Throwable ex) {
  ... ...
}
</code></pre>
      </section>
      <section>
        <h2>Optional<T> Class</h2>
        <ul>
          <li></li>
          <li>OptionalDouble</li>
          <li>OptionalInt</li>
          <li>OptionalLong</li>
        </ul>
      </section>
      <section>
        <h1>Insufficiency</h1>
        <ul>
          <li></li>
          <li>No pattern match</li>
          <li></li>
        </ul>
      </section>
      <section>
        <h2>pattern match example
          <ul>
            <li><a href="http://d.hatena.ne.jp/nowokay/20131212#1386820115">Java SE 8でパターンマッチを実装する</a></li>
            <li>Class match, case class math, list match</li>
          </ul>
        </h2>
      </section>
      <section>
        <h1>references</h1>
        <ul>
          <li></li>
          <li><a href="http://d.hatena.ne.jp/nowokay/20131231/1388478043">2013年まとめ：今年はJava8の年だった</a></li>
        </ul>
      </section>
    </article>
    <script src="scripts/scripts.js"></script>
  </body>
</html>